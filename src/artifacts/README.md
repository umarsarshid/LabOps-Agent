# src/artifacts

`src/artifacts/` owns output files generated by runs and triage.

## Why this folder exists

The project promise is a clean, reproducible evidence packet. This module ensures every run emits a predictable bundle layout and file contracts.

## Expected outputs

- `scenario.json` snapshot of the exact scenario that was run.
- `hostprobe.json` host system snapshot captured for run context.
- `nic_*.txt` raw NIC command outputs captured best-effort per platform.
- `run.json` for run metadata, including optional resolved real-device identity
  and version fields.
- `config_verify.json` real-backend apply/readback evidence showing requested
  vs actual values and support/apply status per setting.
- `camera_config.json` real-backend camera config report with identity fields,
  curated node rows, and missing/unsupported key summaries.
- `config_report.md` real-backend markdown report for quick triage reading with
  status table rows (`applied`, `adjusted`, `unsupported`) plus unit/range
  hints for key numeric knobs (for example exposure/gain).
- `events.jsonl` append-only run timeline.
- `metrics.csv` for plotting and spreadsheet workflows.
- `metrics.json` for machine parsing by agent logic.
- `summary.md` one-page human triage summary per run.
- `report.html` static browser-friendly triage summary with plots-ready tables.
- `bundle_manifest.json` listing artifact files, sizes, and hashes.
- `kb_draft.md` KB-ready markdown draft generated from engineer packet evidence.
- `soak_checkpoint.json` latest soak progress checkpoint (when soak mode is enabled).
- `checkpoints/checkpoint_*.json` periodic checkpoint history snapshots (soak mode).
- `soak_frames.jsonl` resumable frame cache used by soak pause/resume flow.
- optional `<run_id>.zip` support bundle archive.
- Diff/report files against baseline.
- Structured bundle directories (`<out>/<run_id>/`) ready to share with
  engineers.

## Current contents

- `run_writer.hpp/.cpp`: writes canonical `run.json` files into an output
  directory and ensures directory creation.
- `output_dir_utils.hpp`: shared output-directory creation/error helper used by
  artifact writers so directory handling and error text stay consistent.
- `config_verify_writer.hpp/.cpp`: writes `config_verify.json` for real-backend
  parameter apply verification, including per-setting requested/actual/support
  rows and summary counters.
- `camera_config_writer.hpp/.cpp`: writes `camera_config.json` for real-backend
  engineer-facing config reporting, including resolved identity, curated
  setting rows, and missing/unsupported key lists.
- `config_report_writer.hpp/.cpp`: writes `config_report.md` for real-backend
  human-readable config triage with status icons and requested vs actual table
  rows.
- `metrics_writer.hpp/.cpp`: writes canonical metrics artifacts:
  - `metrics.csv` for plotting and spreadsheet workflows
  - `metrics.json` for machine parsing by agent logic
- `scenario_writer.hpp/.cpp`: copies source scenario into bundle as
  `scenario.json` for reproducibility.
- `hostprobe_writer.hpp/.cpp`: writes host context snapshot to
  `hostprobe.json` (OS/CPU/RAM/uptime/load + parsed NIC highlights with
  MTU/link hints where available) and raw NIC command output files
  (`nic_*.txt`).
- `bundle_manifest_writer.hpp/.cpp`: writes `bundle_manifest.json` with
  per-file `size_bytes` and `fnv1a_64` hash values.
- `bundle_zip_writer.hpp/.cpp`: writes optional support zip archives
  (`<out>/<run_id>.zip`) for bundle handoff.
- `metrics_diff_writer.hpp/.cpp`: compares baseline/run `metrics.csv` summary
  rows and writes:
  - `diff.json` for machine parsing
  - `diff.md` for human triage review
- `run_summary_writer.hpp/.cpp`: writes one-page `summary.md` with run
  pass/fail, key metrics, and top anomalies for fast engineer handoff, plus
  optional manual netem command suggestions when a scenario references
  `netem_profile`. (Execution, when requested, is orchestrated in CLI flow.)
- `kb_draft_writer.hpp/.cpp`: converts `engineer_packet.md` from a run folder
  into `kb_draft.md` template content suitable for internal knowledge-base
  drafting and review.
- `html_report_writer.hpp/.cpp`: writes static `report.html` for browser
  viewing without JS, including key metrics, expected-vs-actual deltas, and
  rolling FPS table rows that are easy to copy into plotting workflows.

## Design principle

Artifact structure should be stable and easy to parse by both humans and automation.

## Connection to the project

Without reliable artifact contracts, isolated findings cannot be handed off efficiently. This folder is the bridge between test execution and actionable engineering evidence.
